<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>수학 상수 외우기 & 찾기</title>
    <link rel="stylesheet" href="style.css?v=3">
</head>
<body>
    <div class="app" id="app" data-const="pi">

        <!-- ===== Header ===== -->
        <header class="header">
            <div class="header-left">
                <button class="back-btn" id="backBtn" style="display:none">←</button>
            </div>
            <div class="header-center">
                <div class="const-toggles" id="constToggles">
                    <button class="const-btn active" data-const="pi">π</button>
                    <button class="const-btn" data-const="e">e</button>
                    <button class="const-btn" data-const="sqrt2">√2</button>
                    <button class="const-btn" data-const="phi">φ</button>
                </div>
                <span class="view-title" id="viewTitle" style="display:none"></span>
            </div>
            <div class="header-right">
                <button class="icon-btn" id="settingsBtn">⚙</button>
            </div>
        </header>

        <!-- ===== HOME VIEW ===== -->
        <div class="view active" id="homeView">
            <div class="home-hero">
                <!-- Character -->
                <div class="penguin">
                    <div id="constDiagram"></div>
                </div>

                <div class="home-title" id="homeTitle">π</div>
                <div class="home-greeting">안녕하세요, <span class="nickname" id="userName"></span><sup class="footnote-star" id="userStar">*</sup></div>
                <div class="home-user-desc" id="userDesc"></div>

                <!-- Flowing digits -->
                <div class="digits-flow">
                    <div class="digits-flow-track" id="digitsTrack"></div>
                </div>
            </div>

            <!-- Action buttons -->
            <div class="home-actions">
                <button class="action-btn primary" id="goMemorize">
                    <span class="action-label">외우기</span>
                    <span class="action-sub">Memorize</span>
                </button>
                <button class="action-btn outline" id="goSearch">
                    <span class="action-label">찾기</span>
                    <span class="action-sub">Find</span>
                </button>
            </div>

            <div class="home-records-link">
                <button id="goRecords">기록 보기 →</button>
            </div>

            <footer class="footer">
                <a href="https://github.com/keewon/pi_finder" target="_blank">문의하기</a>
                <span class="dot">·</span>
                <a href="https://www.youtube.com/watch?v=KcRJgoW10FE" target="_blank">나 요즘 파이 됐대</a>
                <span class="dot">·</span>
                <span>© 2026 Keewon Seo</span>
            </footer>
        </div>

        <!-- ===== MEMORIZE VIEW ===== -->
        <div class="view" id="memorizeView">
            <!-- Multiple choice mode -->
            <div id="multipleChoiceMode">
                <div class="progress-section">
                    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                    <div class="stats">
                        <span><span id="currentPosition">0</span> / 1000자리</span>
                        <span id="elapsedTime">00:00</span>
                    </div>
                </div>
                <div class="digits-display" id="piDisplay"></div>
                <div class="question-text" id="questionText"></div>
                <div class="debug-answer" id="debugAnswer"></div>
                <div class="choices-grid" id="choices"></div>
                <div class="result-msg" id="resultMessage"></div>
            </div>

            <!-- Keypad mode -->
            <div id="keypadMode" class="hidden">
                <div class="progress-section">
                    <div class="progress-bar"><div class="progress-fill" id="keypadProgressFill"></div></div>
                    <div class="stats">
                        <span><span id="keypadCurrentPosition">0</span> / 1000자리</span>
                        <span id="keypadElapsedTime">00:00</span>
                    </div>
                </div>
                <div class="digits-display" id="keypadPiDisplay"></div>
                <div class="debug-answer" id="keypadDebugAnswer"></div>
                <div class="keypad-grid" id="keypad">
                    <button class="keypad-key" data-key="1">1</button>
                    <button class="keypad-key" data-key="2">2</button>
                    <button class="keypad-key" data-key="3">3</button>
                    <button class="keypad-key" data-key="4">4</button>
                    <button class="keypad-key" data-key="5">5</button>
                    <button class="keypad-key" data-key="6">6</button>
                    <button class="keypad-key" data-key="7">7</button>
                    <button class="keypad-key" data-key="8">8</button>
                    <button class="keypad-key" data-key="9">9</button>
                    <button class="keypad-key delete" data-key="delete">⌫</button>
                    <button class="keypad-key" data-key="0">0</button>
                </div>
                <div class="result-msg" id="keypadResultMessage"></div>
            </div>

            <!-- Game over panel -->
            <div class="gameover-panel" id="gameoverPanel">
                <div class="gameover-score" id="gameoverScore"></div>
                <div class="gameover-actions">
                    <button class="btn btn-primary btn-block" id="retryBtn">다시하기</button>
                    <button class="btn btn-outline btn-block" id="continueBtn">이어서하기</button>
                </div>
                <div class="gameover-save">
                    <input type="text" id="recordName" placeholder="이름">
                    <button class="btn btn-primary btn-sm" id="saveRecordBtn">기록 저장</button>
                </div>
            </div>
        </div>

        <!-- ===== SEARCH VIEW ===== -->
        <div class="view" id="searchView">
            <div class="search-desc" id="searchDesc">
                <img id="searchCharImage" src="images/search/07_question.png" alt="Search">
                <div><span id="searchConstSymbol">π</span>의 백만 자리 안에서 원하는 숫자가 어디에 있는지 찾아보세요.</div>
            </div>
            <div class="search-input-group">
                <input type="text" class="search-input" id="searchInput" placeholder="숫자 입력 (최대 8자리)" maxlength="8" inputmode="numeric" pattern="[0-9]*">
                <button class="btn btn-primary" id="searchBtn">찾기</button>
            </div>
            <div class="search-result" id="searchResult"></div>
        </div>

        <!-- ===== RECORDS VIEW ===== -->
        <div class="view" id="recordsView">
            <div class="records-list" id="recordsList"></div>
        </div>

        <!-- ===== SETTINGS MODAL ===== -->
        <div class="modal-overlay" id="settingsModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>설정</h3>
                    <button class="modal-close" id="settingsClose">×</button>
                </div>
                <div class="setting-group">
                    <div class="setting-label">사용자 이름</div>
                    <div class="setting-value">
                        <span><span id="settingsUserName"></span><sup class="footnote-star" id="settingsUserStar">*</sup></span>
                        <button id="editNameBtn">변경</button>
                        <button id="randomNameBtn">랜덤</button>
                    </div>
                    <div class="setting-user-desc" id="settingsUserDesc"></div>
                    <div class="setting-name-edit" id="nameEditPanel">
                        <input type="text" id="nameInput" placeholder="이름 입력">
                        <button class="btn btn-primary btn-sm" id="saveNameBtn">저장</button>
                    </div>
                </div>
                <div class="setting-group">
                    <div class="setting-label">시작 위치</div>
                    <select class="setting-select" id="startOption">
                        <option value="decimal">소숫점 이하부터</option>
                        <option value="intpart" id="intpartOption">3. 부터</option>
                    </select>
                </div>
                <div class="setting-group">
                    <div class="setting-label">모드</div>
                    <select class="setting-select" id="modeOption">
                        <option value="keypad">키패드 입력 (1자리씩)</option>
                        <option value="multiple2">객관식 (2자리씩)</option>
                        <option value="multiple3">객관식 (3자리씩)</option>
                        <option value="multiple4" selected>객관식 (4자리씩)</option>
                        <option value="multiple5">객관식 (5자리씩)</option>
                        <option value="multiple6">객관식 (6자리씩)</option>
                        <option value="multiple7">객관식 (7자리씩)</option>
                        <option value="multiple8">객관식 (8자리씩)</option>
                        <option value="multiple9">객관식 (9자리씩)</option>
                        <option value="multiple10">객관식 (10자리씩)</option>
                    </select>
                </div>
                <div class="setting-group">
                    <div class="setting-label">테마</div>
                    <select class="setting-select" id="themeOption">
                        <option value="system">시스템 설정</option>
                        <option value="light">라이트</option>
                        <option value="dark">다크</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <script src="pi-data.js"></script>
    <script src="e-data.js"></script>
    <script src="sqrt2-data.js"></script>
    <script src="phi-data.js"></script>
    <script src="app.js?v=3"></script>
</body>
</html>
